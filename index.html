<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chatech Portal (Public Release)</title>

<!-- Google Font -->
<link href="https://fonts.googleapis.com/css2?family=Kosugi+Maru&display=swap" rel="stylesheet">

<style>
* { margin:0; padding:0; box-sizing:border-box; font-family: 'Kosugi Maru', sans-serif; }

body {
    background: url('bg.gif') no-repeat center center fixed;
    background-size: cover;
    color: #fff;
    min-height: 100vh;
    overflow: hidden;
}

/* Character */
.character {
    position: absolute;
    bottom: 180px;
    left: 50%;
    transform: translateX(-50%);
    max-height: 70vh;
    z-index: 5;
    animation: floatAnime 4s ease-in-out infinite;
}
@keyframes floatAnime {
    0% { transform: translateX(-50%) translateY(0); }
    50% { transform: translateX(-50%) translateY(-15px); }
    100% { transform: translateX(-50%) translateY(0); }
}

/* Dialogue box */
.dialogue-box {
    position: absolute;
    bottom: 100px;
    left: 50%;
    transform: translateX(-50%);
    width: 95%;
    max-width: 900px;
    background: rgba(10, 10, 40, 0.7);
    border: 2px solid rgba(173,216,230,0.4);
    border-radius: 15px;
    padding: 1rem 2rem;
    backdrop-filter: blur(8px);
    z-index: 10;
    box-shadow: 0 0 20px rgba(0,0,80,0.6);
    cursor: pointer;
}

.dialogue-box h3 {
    margin: 0;
    font-size: 1.2rem;
    color: #ffb6c1;
    text-shadow: 0 0 6px rgba(255,182,193,0.8);
}

/* Efek ketik */
#dialogue-text {
    margin: 0.5rem 0;
    font-size: 1.1rem;
    color: #e0ffff;
    min-height: 1.5em;
    white-space: pre-line;
    border-right: 2px solid #e0ffff;
    animation: caret 1s steps(1) infinite;
}
@keyframes caret { 50% { border-color: transparent; } }

/* Footer */
footer {
    position:absolute;
    bottom:5px;
    width:100%;
    text-align:center;
    font-size:0.9rem;
    color:#b0e0e6;
    text-shadow:0 0 5px rgba(0,0,80,0.8);
}

/* Kontrol musik */
.music-controls {
  position: fixed;
  bottom: 15px;
  right: 15px;
  background: rgba(0, 0, 0, 0.6);
  backdrop-filter: blur(6px);
  padding: 6px 10px;
  border-radius: 10px;
  display: flex;
  align-items: center;
  gap: 8px;
  z-index: 200;
  box-shadow: 0 2px 8px rgba(0,0,0,0.3);
}
.music-icon { font-size: 16px; color: #fff; }
.music-controls button {
  background: #444; border: none; padding: 4px 8px;
  border-radius: 6px; color: #fff; font-size: 13px;
  cursor: pointer; transition: 0.2s;
}
.music-controls button:hover { background: #666; }
.music-controls input[type="range"] {
  -webkit-appearance: none;
  width: 80px; height: 4px;
  border-radius: 3px; background: #aaa;
  cursor: pointer;
}
.music-controls input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 12px; height: 12px;
  border-radius: 50%; background: #fff;
  cursor: pointer;
}

/* Responsive */
@media (max-width: 768px) {
    .character { max-height: 50vh; max-width: 100%; bottom:100px; }
    .dialogue-box { bottom: 70px; padding: 1rem; }
}
</style>
</head>
<body>

<!-- Character -->
<img class="character" src="ayano.png" alt="Anime Character">

<!-- Dialogue Box -->
<div class="dialogue-box">
    <h3 id="char-name">Ayano</h3>
    <p id="dialogue-text"></p>
</div>

<!-- Background Music -->
<audio id="bgm" autoplay loop>
  <source src="bgm.mp3" type="audio/mpeg">
</audio>

<!-- Kontrol Musik -->
<div class="music-controls">
  <span class="music-icon">üéµ</span>
  <button id="playPauseBtn">‚è∏</button>
  <input type="range" id="volumeSlider" min="0" max="1" step="0.01" value="0.5">
</div>

<footer>&copy; 2025 Chatech Portal</footer>

<script>
/* VN Scenes */
const scenes = [
  { char: "1.png", name: "Yui", text: "Selamat datang di Chatech Portal." },
  { char: "2.png", name: "Yui", text: "Ini adalah dunia kecil untuk memulai perjalananmu." },
  { char: "3.png", name: "Yui", text: "Aku akan menemanimu menjelajahi portal ini." },
  { char: "4.png", name: "Yui", text: "Baiklah, ayo kita mulai!" }
];

let sceneIndex = 0;
const charImg = document.querySelector(".character");
const charName = document.getElementById("char-name");
const textBox = document.getElementById("dialogue-text");

let typewriterTimeout;
let i = 0;

function showScene() {
  const s = scenes[sceneIndex];
  charImg.src = s.char;
  charName.textContent = s.name;
  textBox.innerHTML = "";
  i = 0;

  function typeWriter() {
    if (i < s.text.length) {
      textBox.innerHTML += s.text.charAt(i);
      i++;
      typewriterTimeout = setTimeout(typeWriter, 40);
    }
  }
  typeWriter();
}

window.onload = () => { showScene(); };

document.querySelector(".dialogue-box").addEventListener("click", () => {
  clearTimeout(typewriterTimeout);

  if (i < scenes[sceneIndex].text.length) {
    textBox.innerHTML = scenes[sceneIndex].text;
    i = scenes[sceneIndex].text.length;
    return;
  }

  if (sceneIndex < scenes.length - 1) {
    sceneIndex++;
    showScene();
  }
});

/* BGM Controls */
const bgm = document.getElementById("bgm");
const playPauseBtn = document.getElementById("playPauseBtn");
const volumeSlider = document.getElementById("volumeSlider");
bgm.volume = 0.5;

playPauseBtn.addEventListener("click", () => {
  if (bgm.paused) { bgm.play(); playPauseBtn.textContent = "‚è∏"; }
  else { bgm.pause(); playPauseBtn.textContent = "‚ñ∂"; }
});

volumeSlider.addEventListener("input", () => { bgm.volume = volumeSlider.value; });

document.body.addEventListener("click", () => {
  if (bgm.paused) { bgm.play().catch(()=>{}); }
}, { once: true });
</script>

</body>
</html>
